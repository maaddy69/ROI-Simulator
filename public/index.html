<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ROI Calculator - Automation Savings</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
    h1, h2, h3 { color: #333; }
    form { display: grid; gap: 10px; background: #f9f9f9; padding: 20px; border-radius: 8px; }
    label { font-weight: bold; }
    input { padding: 8px; border: 1px solid #ddd; border-radius: 4px; width: 200px; }
    button { padding: 10px 15px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
    button:hover { background: #0056b3; }
    #results { border: 1px solid #ddd; padding: 20px; margin: 20px 0; border-radius: 8px; background: #e8f4fd; }
    #results p { margin: 10px 0; font-size: 16px; }
    #scenarios { margin: 20px 0; }
    .scenario { padding: 10px; border: 1px solid #eee; margin: 5px 0; border-radius: 4px; display: flex; justify-content: space-between; align-items: center; }
    .scenario button { background: #28a745; margin-left: 10px; padding: 5px 10px; font-size: 12px; }
    .scenario button:nth-child(2) { background: #dc3545; }
    #reportSection { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
    #reportSection input { width: 300px; }
  </style>
</head>
<body>
  <h1>ðŸŽ¯ Invoicing Automation ROI Calculator</h1>
  <p>Enter your business metrics to see cost savings, payback, and ROI from automation.</p>

  <form id="calcForm">
    <label for="scenario_name">Scenario Name (for saving):</label>
    <input type="text" id="scenario_name" placeholder="e.g., Q4_Pilot">

    <label for="monthly_invoice_volume">Monthly Invoice Volume:</label>
    <input type="number" id="monthly_invoice_volume" value="2000" min="1" required>

    <label for="num_ap_staff">Number of AP Staff:</label>
    <input type="number" id="num_ap_staff" value="3" min="0">

    <label for="avg_hours_per_invoice">Avg. Hours per Invoice (Manual):</label>
    <input type="number" id="avg_hours_per_invoice" value="0.17" step="0.01" min="0" required>

    <label for="hourly_wage">Hourly Wage ($):</label>
    <input type="number" id="hourly_wage" value="30" min="0" required>

    <label for="error_rate_manual">Manual Error Rate (%):</label>
    <input type="number" id="error_rate_manual" value="0.5" step="0.1" min="0" required>

    <label for="error_cost">Error Fix Cost ($ per error):</label>
    <input type="number" id="error_cost" value="100" min="0" required>

    <label for="time_horizon_months">Time Horizon (Months):</label>
    <input type="number" id="time_horizon_months" value="36" min="1" required>

    <label for="one_time_implementation_cost">One-Time Implementation Cost ($):</label>
    <input type="number" id="one_time_implementation_cost" value="50000" min="0">

    <button type="button" onclick="saveScenario()">ðŸ’¾ Save Scenario</button>
    <button type="button" onclick="simulate()">ðŸ”„ Simulate ROI</button>
  </form>

  <div id="results"></div>

  <div id="reportSection" style="display: none;">
    <h3>ðŸ“Š Generate Report (PDF)</h3>
    <p>Enter your email to download a personalized report (lead capture).</p>
    <input type="email" id="email" placeholder="your.email@example.com" required>
    <button onclick="generateReport()">ðŸ“¥ Download PDF</button>
  </div>

  <h2>Saved Scenarios</h2>
  <div id="scenarios"></div>

  <script>
    const API_BASE = '/api';
    let currentScenarioId = null;

    const inputIds = ['monthly_invoice_volume', 'num_ap_staff', 'avg_hours_per_invoice', 'hourly_wage', 'error_rate_manual', 'error_cost', 'time_horizon_months', 'one_time_implementation_cost'];
